@using Toilet2.Controllers;
@using FontAwesome.Sharp;

<!DOCTYPE html>
@{
    ViewBag.Title = "About";
    var general_data = (QuickType.Item[])ViewData["Item"];
}
<html>
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" />

<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,500" rel="stylesheet" />

<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
<link href="~/lib/font-awesome/css/all.css" rel="stylesheet" />

<!--
<h2>@ViewBag.Title.</h2>
<h3>@ViewBag.Message</h3>
    -->
<!--<h1 style="text-align: center;"> Watchlist</h1>
<br>-->
<head>
    <!-- Basic Page Needs
    ================================================== -->
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="icon" href="favicon.ico">
    <title>Timer Agency Template</title>
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="author" content="">
    <!-- Mobile Specific Metas
    ================================================== -->
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <!-- Template CSS Files
    ================================================== -->
    <!-- Twitter Bootstrs CSS -->
    <link rel="stylesheet" href="plugins/bootstrap/bootstrap.min.css">
    <!-- Ionicons Fonts Css -->
    <link rel="stylesheet" href="plugins/ionicons/ionicons.min.css">
    <!-- animate css -->
    <link rel="stylesheet" href="plugins/animate-css/animate.css">
    <!-- Hero area slider css-->
    <link rel="stylesheet" href="plugins/slider/slider.css">
    <!-- slick slider -->
    <link rel="stylesheet" href="plugins/slick/slick.css">
    <!-- Fancybox -->
    <link rel="stylesheet" href="plugins/facncybox/jquery.fancybox.css">
    <!-- hover -->
    <link rel="stylesheet" href="plugins/hover/hover-min.css">
    <!-- template main css file -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <section>
        <div class="container" style="margin-bottom:80px">
            <div class="row">
                <div class="col-lg-12">
                    <nav class="navbar navbar-expand-lg navbar-light bg-light">
                        <a class="navbar-brand">
                            <img src="~/images/Logo.png" />
                        </a>
                        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                                aria-expanded="false" aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                        </button>

                        <div class="collapse navbar-collapse" id="navbarSupportedContent">
                            <ul class="navbar-nav ml-auto">
                                <li class="nav-item">
                                    <a class="nav-link" @Html.ActionLink("Home", "Index", "Home")
                                        <span class="sr-only">(current)</span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" @Html.ActionLink("Dispensers", "About", "Home")</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" @Html.ActionLink("Buildings", "Buildings", "Home")</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" @Html.ActionLink("Bathrooms", "Bathrooms", "Home")</a>
                                </li>

                            </ul>
                        </div>
                    </nav>
                </div>
            </div>
        </div>
    </section>

    <div style="width:100%">
        <table class="table table-bordered" style="">
            <tbody>
                <tr>
                    <td>Bathroom ID:</td>
                    <td><input class="form-control" type="text" id="Bath_ID" name="Bath_ID"></td>
                    <td>Min Level:</td>
                    <td><input class="form-control" type="text" id="min" name="min"></td>
                    <td>Max Level:</td>
                    <td><input class="form-control" type="text" id="max" name="max"></td>
                </tr>

            </tbody>
        </table>
    </div>
    <br />




    <!--Dispenser Table-->
    <table class="table responsive" id="sort">
        <thead>
            <tr>
                <th scope="col">id</th>
                <th scope="col">Level</th>
                <th scope="col">Battery Percentage</th>
                <th scope="col">Bathroom # </th>
                <th scope="col">Type</th>
                <th scope="col">Time</th>
                <th scope="col">Mac Address</th>
            </tr>
        </thead>
        <tbody>



            @{

                /*var new_data = general_data.OrderBy(item => item.Disid);*/
                foreach (QuickType.Item data in general_data)
                {
                    <tr>
                        <th scope="row" data-table-header="id">@data.Disid</th>

                        <td data-table-header="Level">@data.Level</td>
                        <td data-table-header="Battery">@data.Battery%</td>
                        <td data-table-header="Bathrooms ID">@data.Bathid</td>
                        <td data-table-header="Type">@data.Distype</td>



                        <td data-table-header="Time">@data.Update.Substring(0, 19).Replace("T", " Time: ")</td>
                        <td data-table-header="Mac Address">@data.Addr</td>
                    </tr>
                }


            }

        </tbody>

    </table>
    <div style="margin-bottom: 30px; text-align: center; color: #782f40">
        <a href="https://forms.gle/7vswdVKwem8g53yw9">
            <button style="background-color: #782f40; margin-right: 15px" class="btn btn-primary"  aria-pressed="false" autocomplete="off">New Dispenser</button>
        </a>
        <a href="https://forms.gle/tBnFjMB7s8H4fJMZ9">
            <button style="background-color: #782f40; margin-right:15px" class="btn btn-primary" aria-pressed="false" autocomplete="off">Delete Dispenser</button>
        </a>
        <a href="https://forms.gle/KKMm7dTu3zHm3bp78">
            <button style="background-color: #782f40; margin-right: 15px" class="btn btn-primary"  aria-pressed="false" autocomplete="off">Update Dispenser</button>
        </a>
    </div>

</body>
</html>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.12/js/jquery.dataTables.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.12/js/dataTables.bootstrap.min.js"></script>
    <script src "https://cdn.datatables.net/plug-ins/1.10.15/sorting/stringMonthYear.js"></script>
    <script>
        $.fn.dataTable.ext.search.push(function (settings, data, dataIndex) {
            var min = parseInt($('#Bath_ID').val(), 10);
            var age = parseFloat(data[2]) || 0; // use data for the age column

            if (
                (isNaN(min) && isNaN(min)) ||
                (isNaN(min) && age <= min) ||
                (min <= age && isNaN(min)) ||
                (min <= age && age <= min)
            ) {
                return true;
            }
            return false;
        });

        $.fn.dataTable.ext.search.push(function (settings, data, dataIndex) {
            var min = parseInt($('#min').val(), 10);
            var max = parseInt($('#max').val(), 10);
            var age = parseFloat(data[1]) || 0; // use data for the age column

            if (
                (isNaN(min) && isNaN(max)) ||
                (isNaN(min) && age <= max) ||
                (min <= age && isNaN(max)) ||
                (min <= age && age <= max)
            ) {
                return true;
            }
            return false;
        });





        /*$(document).ready(function () {
            $.noConflict();
            $("#sort").DataTable({
                columnDefs: [
                    { type: 'date', targets: [3] }
                ],
            });
        });*/

        $(document).ready(function () {
            $.noConflict();
            var table = $('#sort').DataTable();

            // Event listener to the two range filtering inputs to redraw on input
            $('#Bath_ID, #min, #max').keyup(function () {
                table.draw();
            });

        });


    </script>
    <!-- Output entire data as Json String -->
    <!--  <h3> <b>http request example: </b> <br /> @ViewBag.Message</h3>  -->
